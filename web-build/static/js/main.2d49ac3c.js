(()=>{var e={7313:(e,t,n)=>{"use strict";n.r(t);var r=n(4178),i=n(5861),o=n(885),a=n(4942),l=n(61),s=n(1673),c=n(8323),u=n(9229),d=n(5705),f=n(925),h=n(9924),p=n(2945),g=n(3426),y=n(5004),x=n(229),j=n(2010),m=n(1054),b=n(937),v=n(9385),S=n(1232),w=n(6028),O=n(434),C=n(8715),D=n(2629),k={setState:function(e){},state:{colorScheme:"dark"}},P=y.createContext(k);const I=function(e){var t=e.children,n=y.useState(k.state),r=(0,o.default)(n,2),i=r[0],a=r[1];return(0,D.jsx)(P.Provider,{value:{setState:a,state:i},children:t})};const T=function(e){var t=(0,O.default)().colors,n=(0,y.useContext)(P);return(0,D.jsxs)(v.default,{style:z.switchContainerStyle,children:[(0,D.jsx)(v.default,{style:z.titleWrapper,children:(0,D.jsx)(m.default,{style:[z.switchTitleStyle,{color:t.text}],children:"Highlakka"})}),(0,D.jsx)(v.default,{style:z.switchWrapperStyle,testID:"theme-switch-container-view",children:(0,D.jsx)(C.default,{onChange:function(e){n.setState(!0===e?{colorScheme:"dark"}:{colorScheme:"light"})},testID:"theme-switch",value:"dark"===n.state.colorScheme})})]})};var E,z=j.default.create({switchContainerStyle:{alignItems:"center",flexDirection:"row",minHeight:25,padding:0},switchTitleStyle:{flex:0,fontSize:16,fontWeight:"bold",paddingLeft:15,paddingRight:8},switchWrapperStyle:{flex:0,flexDirection:"row",justifyContent:"flex-end",paddingLeft:8,paddingRight:8},titleWrapper:{flex:1,position:"relative"}}),L=(0,y.createContext)({htmlFilename:"uutiset",title:"Uutiset"}),W="1234567890",H=function(e,t){return`https://${e}/${t}/json-private?APIKEY=${W}`},A={headers:{Accept:"application/json"},method:"GET"},R=n(7492),V=n(1263);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=n(758),N=n(8234),_=n(3287),J=n(2152),B=n(5288),G=n(3706),U=j.default.create({container:{alignSelf:"stretch",paddingVertical:5},title:{fontSize:15}});const Y=function(e){var t=e.colors,n=e.section;return(0,D.jsx)(v.default,{style:[U.container,{backgroundColor:t.background}],children:(0,D.jsx)(m.default,{style:[U.title,{color:t.text}],children:n})})};var q=function(e){var t=N.DateTime.fromISO(e),n=N.DateTime.now().diff(t,["years","months","days","hours","minutes"]).toObject(),r=n.days,i=n.hours,o=n.minutes;return 0!==r?1===r?1440:1440*r:0!==i?1===i?60*(i+1):60*i:o<0?0:o<5?5:o<15?15:o<30?30:o<45?45:o<60?60:99999},K=function(e){var t=N.DateTime.fromISO(e).diffNow(["days","hours","minutes"]).toObject(),n=Math.abs(t.days),r=Math.abs(t.hours),i=Math.abs(t.minutes);return 0!==n?1===n?"Yesterday":`${n} days`:0!==r?1===r?`< ${r+1} hours`:`< ${r} hours`:i<0?"Just now":i<5?"< 5 minutes":i<15?"< 15 minutes":i<30?"< 30 minutes":i<45?"< 45 minutes":i<60?"< 60 minutes":void 0};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=j.default.create({articleContainer:{alignItems:"baseline",flex:1},container:{flex:1},contentContainer:{alignItems:"baseline"},description:{fontSize:14,marginTop:3,minWidth:0},entryContainer:{alignItems:"center",flex:1,flexDirection:"row",paddingHorizontal:10,paddingTop:10,paddingVertical:5},entryContent:{flex:1,flexDirection:"column",paddingHorizontal:10},entryImage:{alignItems:"flex-start",height:100,width:100},footerContainer:X(X({bottom:5,left:0,position:"absolute",right:0},J.default.select({android:{elevation:20},ios:{shadowColor:"black",shadowOffset:{height:-3,width:0},shadowOpacity:.1,shadowRadius:3}})),{},{alignItems:"center"}),footerInfoText:{color:"rgba(96,100,109, 1)",fontSize:10,textAlign:"center"},linkText:{color:"#2e78b7",fontSize:9},source:{fontSize:12},title:{fontSize:15,minWidth:0}});const ee=function(e){var t=e.navigation,n=(0,y.useContext)(L).htmlFilename,r=(0,y.useState)([]),a=(0,o.default)(r,2),l=a[0],s=a[1],c=(0,y.useState)(!0),u=(0,o.default)(c,2),d=u[0],f=u[1],h=(0,y.useState)(!1),p=(0,o.default)(h,2),g=p[0],j=p[1],b=(0,O.default)().colors;(0,y.useEffect)((function(){var e,t=new Request(H("fi.high.fi",`${n}`),A);fetch(t).then((function(t){return(e=e||(0,i.default)((function*(e){return e.json()}))).apply(this,arguments)})).then((function(e){return e.responseData.feed.entries})).then((function(e){if(s([]),"top"===n){var t=0,r=" 1 ..10";e.forEach((function(e){l[r=t<10?" 1 ..10":t<20?" 11 ..20":t<30?" 21 ..30":t<40?" 31 ..40":t<50?" 41 ..50":t<60?" 51 ..60":t<70?" 61 ..70":" 70 ..."]?l[r].push(e):l[r]=[e],t+=1})),s(l),f(!1),j(!1)}else{var i=[];e.map((function(e){var t=X(X({},e),{},{orderNo:q(e.publishedDateJS),publishedDate:N.DateTime.fromISO(e.publishedDateJS).toLocal().toFormat("ccc d.m.yyyy HH:mm"),timeSince:K(e.publishedDateJS)});i.push(t)})),i.sort((function(e,t){return e.orderNo-t.orderNo})),i.forEach((function(e){l[e.timeSince]?l[e.timeSince].push(e):l[e.timeSince]=[e]})),s(l),f(!1),j(!1)}})).catch((function(e){console.error(e),f(!1),j(!0)})).finally((function(){return f(!1)}))}),[]);return(0,D.jsxs)(v.default,{style:Z.container,children:[(0,D.jsx)((function(e){return e.isLoading?(0,D.jsx)(x.default,{animating:!0}):e.isError?(0,D.jsx)(m.default,{children:"Failed to load news!"}):(0,D.jsx)(G.ScrollView,{contentContainerStyle:[Z.contentContainer],style:[Z.container,{backgroundColor:b.card}],children:Object.keys(l).map((function(e,n){return(0,D.jsxs)(v.default,{style:Z.articleContainer,children:[(0,D.jsx)(Y,{colors:b,section:e}),l[e].map((function(e,n){return(0,D.jsxs)(B.default,{onPress:function(){t.navigate("WebView",{link:e.link,title:e.title}),M.openBrowserAsync(e.link).catch(console.error)},style:Z.entryContainer,children:[(0,D.jsx)(_.default,{source:{uri:e.picture},style:[Z.entryImage]}),(0,D.jsxs)(v.default,{style:Z.entryContent,children:[(0,D.jsx)(m.default,{style:[Z.title,{color:b.text}],children:e.title}),(0,D.jsxs)(m.default,{style:[Z.source,{color:b.text}],children:[e.author," - ",e.publishedDate]}),(0,D.jsx)(m.default,{style:[Z.description,{color:b.text}],children:e.shortDescription})]})]},n)}))]},n)}))})}),{isError:g,isLoading:d}),(0,D.jsx)(v.default,{style:[Z.footerContainer,{backgroundColor:b.card}],children:(0,D.jsx)(B.default,{onPress:function(){t.navigate("WebView",{link:"https://high.fi",title:"High.fi"})},children:(0,D.jsxs)(m.default,{style:Z.footerInfoText,children:["Powered by ",(0,D.jsx)(m.default,{style:Z.linkText,children:"high.fi"})]})})})]})};var te=n(5087),ne=j.default.create({defaultContainerStyle:{alignItems:"center",backgroundColor:"white",flexDirection:"row",minHeight:50,padding:0},defaultDescriptionStyle:{flex:0,fontSize:12,paddingLeft:16,paddingRight:8},defaultDisabledOverlayStyle:{backgroundColor:"rgba(255,255,255,0.6)",bottom:0,left:0,position:"absolute",right:0,top:0},defaultSwitchWrapperStyle:{flex:0,flexDirection:"row",marginRight:64,paddingLeft:8},defaultTitleStyle:{flex:0,fontSize:16,paddingLeft:16,paddingRight:8},titleWrapper:{flex:1,position:"relative"}});const re=function(e){var t=e.containerStyle,n=e.description,r=e.descriptionStyle,i=e.disabled,o=e.onValueChange,a=e.title,l=e.titleStyle,s=e.trackColor,c=e.value;return(0,D.jsxs)(v.default,{style:[ne.defaultContainerStyle,t],children:[(0,D.jsxs)(v.default,{style:ne.titleWrapper,children:[(0,D.jsx)(m.default,{style:[ne.defaultTitleStyle,l],children:a}),n?(0,D.jsx)(m.default,{style:[ne.defaultDescriptionStyle,r],children:n}):null,i?(0,D.jsx)(v.default,{style:[ne.defaultDisabledOverlayStyle]}):null]}),(0,D.jsx)(v.default,{style:[ne.defaultSwitchWrapperStyle],children:(0,D.jsx)(te.default,{disabled:i,onValueChange:o,trackColor:s,value:c})})]})};function ie(){var e=(0,y.useState)(!1),t=(0,o.default)(e,2),n=t[0],r=t[1],i=(0,O.default)().colors;return(0,D.jsxs)(G.ScrollView,{contentContainerStyle:[ae.contentContainer],style:[ae.container,{backgroundColor:i.card}],children:[(0,D.jsxs)(v.default,{children:[(0,D.jsx)(m.default,{style:[ae.titleStyle,{color:i.text}],children:"Information"}),(0,D.jsx)(v.default,{children:(0,D.jsx)(oe,{icon:"md-compass",isLastOption:!0,label:"Highlakka on GitHub",onPress:function(){}})})]},"application"),(0,D.jsxs)(v.default,{children:[(0,D.jsx)(m.default,{style:[ae.titleStyle,{color:i.text}],children:"General"}),(0,D.jsx)(re,{containerStyle:{backgroundColor:i.card},onValueChange:function(e){console.log("use mobile mode:",e),r(e)},title:"Use mobile mode",titleStyle:{color:i.text},value:n})]})]})}var oe=function(e){var t=e.icon,n=e.isLastOption,r=e.label,i=e.onPress,o=(0,O.default)().colors;return(0,D.jsx)(G.RectButton,{onPress:i,style:[ae.option,n&&ae.lastOption,{backgroundColor:o.card}],children:(0,D.jsxs)(v.default,{style:{flexDirection:"row"},children:[(0,D.jsx)(v.default,{style:ae.optionIconContainer,children:(0,D.jsx)(l.default,{color:"rgba(0,0,0,0.35)",name:t,size:22})}),(0,D.jsx)(v.default,{children:(0,D.jsx)(m.default,{style:[ae.optionText,{color:o.text}],children:r})})]})})},ae=j.default.create({container:{backgroundColor:"#fafafa",flex:1,flexDirection:"row",minHeight:50},contentContainer:{flex:1,minHeight:50,paddingTop:15},lastOption:{},option:{backgroundColor:"#fdfdfd",borderBottomWidth:0,borderColor:"#ededed",paddingHorizontal:5,paddingVertical:5},optionIconContainer:{marginLeft:12,marginRight:12},optionText:{alignSelf:"flex-start",fontSize:15,marginTop:1},titleStyle:{flex:0,fontSize:16,paddingLeft:16,paddingRight:8}}),le=n(7415),se={height:"100%",top:0,width:"100%"},ce=j.default.create({container:{height:"100%",overflow:"hidden",width:"100%"}}),ue=function(e){var t=e.target;return"web"===J.default.OS?(0,D.jsx)("iframe",{src:t,style:se}):(0,D.jsx)(v.default,{style:ce.container,children:(0,D.jsx)(le.WebView,{scalesPageToFit:!0,source:{uri:t},startInLoadingState:!0})})};function de(e){var t=e.route.params.link;return(0,D.jsx)(v.default,{style:fe.container,children:(0,D.jsx)(ue,{target:t})})}var fe=j.default.create({container:{alignItems:"center",backgroundColor:"#fff",flex:1,justifyContent:"center"}});function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(e){return(0,D.jsxs)(s.default,pe(pe({},e),{},{children:[(0,D.jsx)(T,pe({},e)),(0,D.jsx)(c.default,pe({},e))]}))},ye=(0,u.default)(),xe=(0,p.default)(),je=function(e){return(0,D.jsx)(l.default,{color:"blue",name:"menu",onPress:function(){return e.navigation.toggleDrawer()},size:30,testID:"drawer-icon"})},me=function(e){var t=e.item,n=t.htmlFilename,r=t.title;return(0,D.jsx)(L.Provider,{value:{htmlFilename:n,title:r},children:(0,D.jsxs)(xe.Navigator,{children:[(0,D.jsx)(xe.Screen,{component:ee,name:"Highlakka",options:{headerShown:!1}}),(0,D.jsx)(xe.Screen,{component:ie,name:"Settings",options:{title:"Settings"}}),(0,D.jsx)(xe.Screen,{component:de,name:"WebView",options:function(e){return{title:e.route.params.title}}})]})})},be=function(){return(0,D.jsx)(v.default,{style:{alignItems:"center",flex:1,justifyContent:"center"}})},ve=function(){var e=function(){var e=y.useState(!1),t=(0,o.default)(e,2),r=t[0],a=t[1];return y.useEffect((function(){var e;!function(){(e=e||(0,i.default)((function*(){try{V.preventAutoHideAsync(),yield R.loadAsync(F(F({},l.default.font),{},{"space-mono":n(370)}))}catch(e){console.warn(e)}finally{a(!0),V.hideAsync()}}))).apply(this,arguments)}()}),[]),r}(),t=((0,b.default)(),"dark"===(0,y.useContext)(P).state.colorScheme),r=(0,y.useState)([]),a=(0,o.default)(r,2),s=a[0],c=a[1],u=(0,y.useState)(!0),p=(0,o.default)(u,2),j=p[0],O=p[1],C=(0,y.useState)(!1),k=(0,o.default)(C,2),I=k[0],T=k[1],z=t?"dark":"light";return(0,y.useEffect)((function(){var e;(function(){return(e=e||(0,i.default)((function*(){var e=yield function(e,t,n,r,o){return(E=E||(0,i.default)((function*(e,t,n,r,i){var o=[],a={depth:1,htmlFilename:"top",sectionID:"top",selected:!0,title:t};o.push(a);var l={depth:1,htmlFilename:n,sectionID:n,selected:!0,title:r};o.push(l);var s=`${H(e,`api/?act=listCategories&usedLanguage=${i}&APIKEY=${W}`)}`,c=new Request(s,A);try{var u=yield fetch(c);return(yield u.json()).responseData.categories.forEach((function(e){var t={};for(var n in e)t[n]=e[n];t.selected=!1,o.push(t)})),o}catch(I){throw console.error(I),Error(`Fetching languages failed! ${I.message}`)}}))).apply(this,arguments)}("fi.high.fi","Suosituimmat","uutiset","Uusimmat","finnish");c(e),O(!1),T(!1)}))).apply(this,arguments)})().catch((function(e){console.error(e),O(!1),T(!0)}))}),[]),e?j?(0,D.jsx)(S.SafeAreaProvider,{children:(0,D.jsx)(w.SafeAreaView,{style:[Se.container],children:(0,D.jsx)(x.default,{animating:!0})})}):I?(0,D.jsx)(S.SafeAreaProvider,{children:(0,D.jsx)(w.SafeAreaView,{style:[Se.container],children:(0,D.jsx)(m.default,{children:"Failed to load news!"})})}):(0,D.jsx)(S.SafeAreaProvider,{children:(0,D.jsx)(d.default,{theme:t?f.default:h.default,children:(0,D.jsxs)(v.default,{style:[Se.container],testID:"navigation-container-view",children:[(0,D.jsx)(g.default,{style:z}),(0,D.jsx)(ye.Navigator,{drawerContent:ge,initialRouteName:"Root",screenOptions:function(e){var t=e.navigation;return{headerLeft:function(){return(0,D.jsx)(je,{navigation:t})}}},children:s&&s.length>0?s.map((function(e){return(0,D.jsx)(ye.Screen,{children:function(){return(0,D.jsx)(me,{item:e})},name:`${e.title}_${e.sectionID}`,options:{drawerLabel:e.title,headerTitle:e.title}},e.sectionID)})):(0,D.jsx)(ye.Screen,{component:be,name:"empty"})})]})})}):null};var Se=j.default.create({container:{backgroundColor:"#fff",flex:1},header:{height:50}});(0,r.default)(ve),(0,r.default)((function(){return(0,D.jsx)(I,{children:(0,D.jsx)(ve,{})})}))},370:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/SpaceMono-Regular.8dc9dfb5a618f0d496e9.ttf"},4654:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,i,o)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,i,o]=e[u],l=!0,s=0;s<r.length;s++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,o<a&&(a=o));if(l){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,i,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[a,l,s]=r,c=0;if(a.some((t=>0!==e[t]))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(s)var u=s(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[162],(()=>n(7313)));r=n.O(r)})();
//# sourceMappingURL=main.2d49ac3c.js.map