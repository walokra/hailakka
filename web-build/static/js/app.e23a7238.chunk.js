(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{296:function(e,t,n){"use strict";n.d(t,"a",(function(){return Me}));var r=n(17),a=n.n(r),o=n(0),i=n.n(o),c=n(114),l=n(62),s=n(10),u=n(5),p=n(24),f=n(98),d=n(37),m=n(41),h=n(264),y=n(96),b=n(261),g=n(481),E=n(290),O=n(298),S=n(480),v=n(213),w=n(15),j=n.n(w),k=n(8),x=n.n(k),P=n(482),C=n(115),D=n(214);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e,t){return"https://"+e+"/"+t},W={method:"GET",headers:{Accept:"application/json","User-Agent":"Highlakka, (0.0.1)-(1) (RN)"}},H=n(237),L=n(297),z=n(83);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={darkModeEnabled:!1},G=Object(z.c)({Settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_THEME":switch(t.payload){case!0:return M(M({},e),{},{darkModeEnabled:!0});case!1:return M(M({},e),{},{darkModeEnabled:!1})}default:return e}}}),N=function(e){var t=Object(H.a)().colors,n=Object(c.c)((function(e){return e.Settings.darkModeEnabled})),r=Object(c.b)();return i.a.createElement(u.a,{style:V.switchContainerStyle},i.a.createElement(u.a,{style:V.titleWrapper},i.a.createElement(p.a,{style:[V.switchTitleStyle,{color:t.text}]},"Highlakka")),i.a.createElement(u.a,{style:V.switchWrapperStyle},i.a.createElement(L.a,{value:n,onChange:function(e){r({type:"TOGGLE_THEME",payload:e})}})))},V=s.a.create({switchContainerStyle:{padding:0,minHeight:25,alignItems:"center",flexDirection:"row"},switchTitleStyle:{flex:0,paddingLeft:15,paddingRight:8,fontSize:16,fontWeight:"bold"},switchWrapperStyle:{flex:0,flexDirection:"row",paddingLeft:8,paddingRight:8,justifyContent:"flex-end"},titleWrapper:{flex:1,position:"relative"}}),J=n(12),q=n(42),U=n(56),B=n(140),Y=n(139),_=n(113),K=Object(o.createContext)({htmlFilename:"uutiset",title:"Uutiset"}),Q=function(e){var t=_.DateTime.fromISO(e),n=_.DateTime.now().diff(t,["years","months","days","hours","minutes"]).toObject(),r=n.days,a=n.hours,o=n.minutes;return 0!=r?1==r?1440:1440*r:0!=a?1==a?60*(a+1):60*a:o<0?0:o<5?5:o<15?15:o<30?30:o<45?45:o<60?60:99999},X=function(e){var t=_.DateTime.fromISO(e).diffNow(["days","hours","minutes"]).toObject(),n=Math.abs(t.days),r=Math.abs(t.hours),a=Math.abs(t.minutes);return 0!=n?1===n?"Yesterday":n+" days":0!=r?1==r?"< "+(r+1)+" hours":"< "+r+" hours":a<0?"Just now":a<5?"< 5 minutes":a<15?"< 15 minutes":a<30?"< 30 minutes":a<45?"< 45 minutes":a<60?"< 60 minutes":void 0},Z=s.a.create({container:{alignSelf:"stretch",paddingVertical:5},title:{fontSize:15}}),$=function(e){var t=e.section,n=e.colors;return i.a.createElement(u.a,{style:[Z.container,{backgroundColor:n.background}]},i.a.createElement(p.a,{style:[Z.title,{color:n.text}]},t))};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={method:"GET",headers:{Accept:"application/json","User-Agent":"Highlakka"}};function re(e){e.route,e.navigation;var t=Object(o.useContext)(K).htmlFilename,n=Object(o.useState)([]),r=a()(n,2),c=r[0],l=r[1],s=Object(o.useState)(!0),d=a()(s,2),m=d[0],h=d[1],y=Object(o.useState)(!1),b=a()(y,2),g=b[0],E=b[1],O=Object(H.a)().colors;Object(o.useEffect)((function(){var e=new Request(R("fi.high.fi",t+"/json-private?APIKEY=123"),ne);fetch(e).then((function(e){return j.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.json());case 1:case"end":return t.stop()}}),null,null,null,Promise)})).then((function(e){return e.responseData.feed.entries})).then((function(e){var n,r,a;return j.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:l([]),"top"==t?(n=0,r=" 1 ..10",e.forEach((function(e){c[r=n<10?" 1 ..10":n<20?" 11 ..20":n<30?" 21 ..30":n<40?" 31 ..40":n<50?" 41 ..50":n<60?" 51 ..60":n<70?" 61 ..70":" 70 ..."]?c[r].push(e):c[r]=[e],n+=1})),l(c),h(!1),E(!1)):(a=[],e.map((function(e,t){var n=te(te({},e),{},{timeSince:X(e.publishedDateJS),orderNo:Q(e.publishedDateJS),publishedDate:_.DateTime.fromISO(e.publishedDateJS).toLocal().toFormat("ccc d.m.yyyy HH:mm")});a.push(n)})),a.sort((function(e,t){return e.orderNo-t.orderNo})),a.forEach((function(e){c[e.timeSince]?c[e.timeSince].push(e):c[e.timeSince]=[e]})),l(c),h(!1),E(!1));case 2:case"end":return o.stop()}}),null,null,null,Promise)})).catch((function(e){console.error(e),h(!1),E(!0)})).finally((function(){return h(!1)}))}),[]);return i.a.createElement(u.a,{style:oe.container},i.a.createElement((function(e){return e.isLoading?i.a.createElement(f.a,{animating:!0}):e.isError?i.a.createElement(p.a,null,"Failed to load news!"):i.a.createElement(Y.b,{style:[oe.container,{backgroundColor:O.card}],contentContainerStyle:[oe.contentContainer]},Object.keys(c).map((function(e,t){return i.a.createElement(u.a,{key:t,style:oe.articleContainer},i.a.createElement($,{section:e,colors:O}),c[e].map((function(e,t){return i.a.createElement(U.a,{key:t,onPress:function(){return B.a(e.link)},style:oe.entryContainer},i.a.createElement(q.a,{source:{uri:e.picture},style:[oe.entryImage]}),i.a.createElement(u.a,{style:oe.entryContent},i.a.createElement(p.a,{style:[oe.title,{color:O.text}]},e.title),i.a.createElement(p.a,{style:[oe.source,{color:O.text}]},e.author," - ",e.publishedDate),i.a.createElement(p.a,{style:[oe.description,{color:O.text}]},e.shortDescription)))})))})))}),{isLoading:m,isError:g}),i.a.createElement(u.a,{style:[oe.footerContainer,{backgroundColor:O.card}]},i.a.createElement(U.a,{onPress:ae},i.a.createElement(p.a,{style:oe.footerInfoText},"Powered by ",i.a.createElement(p.a,{style:oe.linkText},"high.fi")))))}function ae(){B.a("https://high.fi")}var oe=s.a.create({container:{flex:1},contentContainer:{alignItems:"baseline"},articleContainer:{flex:1,alignItems:"baseline"},footerContainer:te(te({position:"absolute",bottom:5,left:0,right:0},J.a.select({ios:{shadowColor:"black",shadowOffset:{width:0,height:-3},shadowOpacity:.1,shadowRadius:3},android:{elevation:20}})),{},{alignItems:"center"}),footerInfoText:{fontSize:10,color:"rgba(96,100,109, 1)",textAlign:"center"},entryContainer:{paddingVertical:5,flex:1,flexDirection:"row",alignItems:"center",paddingHorizontal:10,paddingTop:10},entryImage:{alignItems:"flex-start",width:100,height:100},entryContent:{flex:1,flexDirection:"column",paddingHorizontal:10},title:{fontSize:15,minWidth:0},source:{fontSize:12},description:{minWidth:0,fontSize:14,marginTop:3},linkText:{fontSize:9,color:"#2e78b7"}}),ie=n(22),ce=n.n(ie),le=n(4),se=n.n(le),ue=n(7),pe=n.n(ue),fe=n(9),de=n.n(fe),me=n(11),he=n.n(me),ye=n(2),be=n.n(ye),ge=n(99),Ee=n(1),Oe=n.n(Ee);function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be()(e);if(t){var a=be()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return he()(this,n)}}var ve=s.a.create({defaultContainerStyle:{padding:0,minHeight:50,backgroundColor:"white",alignItems:"center",flexDirection:"row"},defaultTitleStyle:{flex:0,paddingLeft:16,paddingRight:8,fontSize:16},defaultDescriptionStyle:{flex:0,paddingLeft:16,paddingRight:8,fontSize:12},defaultSwitchWrapperStyle:{flex:0,flexDirection:"row",paddingLeft:8,marginRight:64},defaultDisabledOverlayStyle:{backgroundColor:"rgba(255,255,255,0.6)",position:"absolute",top:0,right:0,bottom:0,left:0},titleWrapper:{flex:1,position:"relative"}}),we=function(e){de()(n,e);var t=Se(n);function n(){return se()(this,n),t.apply(this,arguments)}return pe()(n,[{key:"render",value:function(){var e=this.props,t=e.containerProps,n=e.containerStyle,r=e.titleProps,a=e.titleStyle,o=e.title,c=e.disabled,l=e.switchProps,s=e.disabledOverlayStyle,f=e.switchWrapperProps,d=e.switchWrapperStyle,m=e.value,h=e.trackColor,y=e.onValueChange,b=e.descriptionProps,g=e.descriptionStyle,E=e.description;return i.a.createElement(u.a,ce()({},t,{style:[ve.defaultContainerStyle,n]}),i.a.createElement(u.a,{style:ve.titleWrapper},i.a.createElement(p.a,ce()({},r,{style:[ve.defaultTitleStyle,a]}),o),E?i.a.createElement(p.a,ce()({},b,{style:[ve.defaultDescriptionStyle,g]}),E):null,c?i.a.createElement(u.a,{style:[ve.defaultDisabledOverlayStyle,c?s:null]}):null),i.a.createElement(u.a,ce()({},f,{style:[ve.defaultSwitchWrapperStyle,d]}),i.a.createElement(ge.a,ce()({value:m,trackColor:h,onValueChange:y,disabled:c},l))))}}]),n}(o.Component);we.propTypes={containerProps:Oe.a.object,containerStyle:Oe.a.object,disabledOverlayStyle:Oe.a.object,titleProps:Oe.a.object,titleStyle:Oe.a.object,title:Oe.a.string.isRequired,descriptionProps:Oe.a.object,descriptionStyle:Oe.a.object,description:Oe.a.string,switchWrapperProps:Oe.a.object,switchWrapperStyle:Oe.a.object,value:Oe.a.bool.isRequired,disabled:Oe.a.bool,onValueChange:Oe.a.func.isRequired,trackColor:Oe.a.shape({true:Oe.a.string,false:Oe.a.string}),switchProps:Oe.a.object},we.defaultProps={containerProps:{},containerStyle:{},disabledOverlayStyle:{},titleProps:{},titleStyle:{},descriptionProps:{},descriptionStyle:{},description:null,switchWrapperProps:{},switchWrapperStyle:{},disabled:!1,switchProps:{},trackColor:null};var je=we;function ke(e){e.route,e.navigation;var t=Object(o.useState)(!1),n=a()(t,2),r=n[0],c=n[1],l=Object(H.a)().colors;return i.a.createElement(Y.b,{style:[Pe.container,{backgroundColor:l.card}],contentContainerStyle:[Pe.contentContainer]},i.a.createElement(u.a,{key:"application"},i.a.createElement(p.a,{style:[Pe.titleStyle,{color:l.text}]},"Information"),i.a.createElement(u.a,null,i.a.createElement(xe,{icon:"md-compass",label:"Highlakka on GitHub",onPress:function(){return B.a("https://github.com/walokra/highlakka")},isLastOption:!0}))),i.a.createElement(u.a,null,i.a.createElement(p.a,{style:[Pe.titleStyle,{color:l.text}]},"General"),i.a.createElement(je,{title:"Use mobile mode",containerStyle:{backgroundColor:l.card},titleStyle:{color:l.text},onValueChange:function(e){console.log("use mobile mode:",e),c(e)},value:r})))}function xe(e){var t=e.icon,n=e.label,r=e.onPress,a=e.isLastOption,o=Object(H.a)().colors;return i.a.createElement(Y.a,{style:[Pe.option,a&&Pe.lastOption,{backgroundColor:o.card}],onPress:r},i.a.createElement(u.a,{style:{flexDirection:"row"}},i.a.createElement(u.a,{style:Pe.optionIconContainer},i.a.createElement(P.a,{name:t,size:22,color:"rgba(0,0,0,0.35)"})),i.a.createElement(u.a,null,i.a.createElement(p.a,{style:[Pe.optionText,{color:o.text}]},n))))}var Pe=s.a.create({container:{flex:1,backgroundColor:"#fafafa",minHeight:50,flexDirection:"row"},contentContainer:{paddingTop:15,flex:1,minHeight:50},optionIconContainer:{marginRight:12,marginLeft:12},titleStyle:{flex:0,paddingLeft:16,paddingRight:8,fontSize:16},option:{backgroundColor:"#fdfdfd",paddingHorizontal:5,paddingVertical:5,borderBottomWidth:0,borderColor:"#ededed"},lastOption:{},optionText:{fontSize:15,alignSelf:"flex-start",marginTop:1}}),Ce=[n(289).a],De=[z.a.apply(void 0,Ce)],Te=z.d.apply(void 0,De),Ie=Object(z.e)(G,{},Te),Re=function(e){return i.a.createElement(E.a,e,i.a.createElement(N,e),i.a.createElement(O.a,e))},We=Object(S.a)(),He=Object(g.a)(),Le=function(e){var t=e.item,n=t.title,r=t.htmlFilename;return i.a.createElement(K.Provider,{value:{htmlFilename:r,title:n}},i.a.createElement(He.Navigator,null,i.a.createElement(He.Screen,{name:"Highlakka",component:re,options:{title:"Highlakka: "+n}}),i.a.createElement(He.Screen,{name:"Settings",component:ke})))};function ze(){return i.a.createElement(u.a,{style:{flex:1,alignItems:"center",justifyContent:"center"}})}function Fe(){var e=function(){var e=o.useState(!1),t=a()(e,2),r=t[0],i=t[1];return o.useEffect((function(){j.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D.b(),e.next=4,j.a.awrap(C.b(I(I({},P.a.font),{},{"space-mono":n(433)})));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:return e.prev=9,i(!0),D.a(),e.finish(9);case 13:case"end":return e.stop()}}),null,null,[[0,6,9,13]],Promise)}),[]),r}(),t=Object(v.useColorScheme)(),r=d.a.get("window").width>=768,s=Object(c.c)((function(e){return e.Settings.darkModeEnabled})),g=Object(o.useState)([]),E=a()(g,2),O=E[0],S=E[1],w=Object(o.useState)(!0),k=a()(w,2),x=k[0],T=k[1],H=Object(o.useState)(!1),L=a()(H,2),z=L[0],F=L[1],M="light"!=t&&s?"dark-content":"light-content";return Object(o.useEffect)((function(){(function(e,t,n,r,a){var o,i,c,l,s,u;return j.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return(o=[]).push({title:t,sectionID:"top",htmlFilename:"top",selected:!0,depth:1}),i={title:r,sectionID:n,htmlFilename:n,selected:!0,depth:1},o.push(i),c=""+R(e,"/api/?act=listCategories&usedLanguage="+a+"&APIKEY=1234567890"),l=new Request(c,W),p.prev=7,p.next=10,j.a.awrap(fetch(l));case 10:return s=p.sent,p.next=13,j.a.awrap(s.json());case 13:return u=p.sent,u.responseData.categories.forEach((function(e){var t={};for(var n in e)t[n]=e[n];t.selected=!1,o.push(t)})),p.abrupt("return",o);case 19:throw p.prev=19,p.t0=p.catch(7),console.error(p.t0),Error("Fetching languages failed! "+p.t0.message);case 23:case"end":return p.stop()}}),null,null,[[7,19]],Promise)})("fi.high.fi","Suosituimmat","uutiset","Uusimmat","finnish").then((function(e){S(e),T(!1),F(!1)})).catch((function(e){console.error(e),T(!1),F(!0)})).finally((function(){return T(!1)}))}),[]),e?x?i.a.createElement(m.b,null,i.a.createElement(m.c,{style:[Ae.container]},i.a.createElement(f.a,{animating:!0}))):z?i.a.createElement(m.b,null,i.a.createElement(m.c,{style:[Ae.container]},i.a.createElement(p.a,null,"Failed to load news!"))):i.a.createElement(m.b,null,i.a.createElement(h.a,{theme:"light"!==t&&s?b.a:y.a},i.a.createElement(u.a,{style:[Ae.container]},i.a.createElement(l.a,{barStyle:M}),i.a.createElement(We.Navigator,{drawerType:r?"permanent":"back",drawerStyle:r?null:{width:"100%"},overlayColor:"transparent",drawerContent:Re,initialRouteName:"Root"},O&&O.length>0?O.map((function(e,t){return i.a.createElement(We.Screen,{key:e.sectionID,name:e.title+"_"+e.sectionID,children:function(){return i.a.createElement(Le,{item:e})},options:{drawerLabel:e.title}})})):i.a.createElement(We.Screen,{name:"empty",component:ze}))))):null}function Me(){return i.a.createElement(v.AppearanceProvider,null,i.a.createElement(c.a,{store:Ie},i.a.createElement(Fe,null)))}var Ae=s.a.create({container:{flex:1,backgroundColor:"#fff"},header:{height:50}})},310:function(e,t,n){n(311),e.exports=n(468)},311:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/expo-service-worker.js",{scope:"/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},433:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"}},[[310,1,2]]]);
//# sourceMappingURL=app.e23a7238.chunk.js.map