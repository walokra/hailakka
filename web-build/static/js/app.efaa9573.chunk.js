(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{319:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return we}));var r=n(23),i=n.n(r),o=n(9),c=n.n(o),a=n(6),l=n.n(a),s=n(298),u=n(299),d=n(483),f=n(492),j=n(493),h=n(192),b=n(489),p=n(322),O=n(321),y=n(0),g=n.n(y),x=n(132),m=n(11),S=n(32),v=n(184),w=n(8),C=n(109),k=n(491),D=n(170),P=n(326),I=n(16),T={setState:function(e){},state:{colorScheme:"dark"}},E=g.a.createContext(T),H=function(e){var t=e.children,n=g.a.useState(T.state),r=c()(n,2),i=r[0],o=r[1];return Object(I.jsx)(E.Provider,{value:{setState:o,state:i},children:t})},W=function(e){var t=Object(D.default)().colors,n=Object(y.useContext)(E);return Object(I.jsxs)(w.default,{style:z.switchContainerStyle,children:[Object(I.jsx)(w.default,{style:z.titleWrapper,children:Object(I.jsx)(S.default,{style:[z.switchTitleStyle,{color:t.text}],children:"Highlakka"})}),Object(I.jsx)(w.default,{style:z.switchWrapperStyle,children:Object(I.jsx)(P.default,{onChange:function(e){n.setState(!0===e?{colorScheme:"dark"}:{colorScheme:"light"})},value:"dark"===n.state.colorScheme})})]})},z=m.default.create({switchContainerStyle:{alignItems:"center",flexDirection:"row",minHeight:25,padding:0},switchTitleStyle:{flex:0,fontSize:16,fontWeight:"bold",paddingLeft:15,paddingRight:8},switchWrapperStyle:{flex:0,flexDirection:"row",justifyContent:"flex-end",paddingLeft:8,paddingRight:8},titleWrapper:{flex:1,position:"relative"}}),L=Object(y.createContext)({htmlFilename:"uutiset",title:"Uutiset"}),A=function(e,t){return"https://"+e+"/"+t+"/json-private?APIKEY=1234567890"},R={headers:{Accept:"application/json"},method:"GET"},V=function(){var e=i()((function*(e,t,n,r,i){var o=[],c={depth:1,htmlFilename:"top",sectionID:"top",selected:!0,title:t};o.push(c);var a={depth:1,htmlFilename:n,sectionID:n,selected:!0,title:r};o.push(a);var l=""+A(e,"/api/?act=listCategories&usedLanguage="+i+"&APIKEY=1234567890"),s=new Request(l,R);try{var u=yield fetch(s);return(yield u.json()).responseData.categories.forEach((function(e){var t={};for(var n in e)t[n]=e[n];t.selected=!1,o.push(t)})),o}catch(d){throw console.error(d),Error("Fetching languages failed! "+d.message)}}));return function(t,n,r,i,o){return e.apply(this,arguments)}}(),F=n(482),N=n(229),J=n(228);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=n(323),U=n(151),Y=n(62),q=n(10),K=n(101),_=n(98),Q=m.default.create({container:{alignSelf:"stretch",paddingVertical:5},title:{fontSize:15}}),X=function(e){var t=e.colors,n=e.section;return Object(I.jsx)(w.default,{style:[Q.container,{backgroundColor:t.background}],children:Object(I.jsx)(S.default,{style:[Q.title,{color:t.text}],children:n})})},Z=function(e){var t=U.DateTime.fromISO(e),n=U.DateTime.now().diff(t,["years","months","days","hours","minutes"]).toObject(),r=n.days,i=n.hours,o=n.minutes;return 0!==r?1===r?1440:1440*r:0!==i?1===i?60*(i+1):60*i:o<0?0:o<5?5:o<15?15:o<30?30:o<45?45:o<60?60:99999},$=function(e){var t=U.DateTime.fromISO(e).diffNow(["days","hours","minutes"]).toObject(),n=Math.abs(t.days),r=Math.abs(t.hours),i=Math.abs(t.minutes);return 0!==n?1===n?"Yesterday":n+" days":0!==r?1===r?"< "+(r+1)+" hours":"< "+r+" hours":i<0?"Just now":i<5?"< 5 minutes":i<15?"< 15 minutes":i<30?"< 30 minutes":i<45?"< 45 minutes":i<60?"< 60 minutes":void 0};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=m.default.create({articleContainer:{alignItems:"baseline",flex:1},container:{flex:1},contentContainer:{alignItems:"baseline"},description:{fontSize:14,marginTop:3,minWidth:0},entryContainer:{alignItems:"center",flex:1,flexDirection:"row",paddingHorizontal:10,paddingTop:10,paddingVertical:5},entryContent:{flex:1,flexDirection:"column",paddingHorizontal:10},entryImage:{alignItems:"flex-start",height:100,width:100},footerContainer:te(te({bottom:5,left:0,position:"absolute",right:0},q.default.select({android:{elevation:20},ios:{shadowColor:"black",shadowOffset:{height:-3,width:0},shadowOpacity:.1,shadowRadius:3}})),{},{alignItems:"center"}),footerInfoText:{color:"rgba(96,100,109, 1)",fontSize:10,textAlign:"center"},linkText:{color:"#2e78b7",fontSize:9},source:{fontSize:12},title:{fontSize:15,minWidth:0}}),re=function(e){var t=e.navigation,n=Object(y.useContext)(L).htmlFilename,r=Object(y.useState)([]),o=c()(r,2),a=o[0],l=o[1],s=Object(y.useState)(!0),u=c()(s,2),d=u[0],f=u[1],j=Object(y.useState)(!1),h=c()(j,2),b=h[0],p=h[1],O=Object(D.default)().colors;Object(y.useEffect)((function(){var e=new Request(A("fi.high.fi",""+n),R);fetch(e).then(function(){var e=i()((function*(e){return e.json()}));return function(t){return e.apply(this,arguments)}}()).then((function(e){return e.responseData.feed.entries})).then((function(e){if(l([]),"top"===n){var t=0,r=" 1 ..10";e.forEach((function(e){a[r=t<10?" 1 ..10":t<20?" 11 ..20":t<30?" 21 ..30":t<40?" 31 ..40":t<50?" 41 ..50":t<60?" 51 ..60":t<70?" 61 ..70":" 70 ..."]?a[r].push(e):a[r]=[e],t+=1})),l(a),f(!1),p(!1)}else{var i=[];e.map((function(e){var t=te(te({},e),{},{orderNo:Z(e.publishedDateJS),publishedDate:U.DateTime.fromISO(e.publishedDateJS).toLocal().toFormat("ccc d.m.yyyy HH:mm"),timeSince:$(e.publishedDateJS)});i.push(t)})),i.sort((function(e,t){return e.orderNo-t.orderNo})),i.forEach((function(e){a[e.timeSince]?a[e.timeSince].push(e):a[e.timeSince]=[e]})),l(a),f(!1),p(!1)}})).catch((function(e){console.error(e),f(!1),p(!0)})).finally((function(){return f(!1)}))}),[]);return Object(I.jsxs)(w.default,{style:ne.container,children:[Object(I.jsx)((function(e){return e.isLoading?Object(I.jsx)(x.default,{animating:!0}):e.isError?Object(I.jsx)(S.default,{children:"Failed to load news!"}):Object(I.jsx)(_.ScrollView,{contentContainerStyle:[ne.contentContainer],style:[ne.container,{backgroundColor:O.card}],children:Object.keys(a).map((function(e,n){return Object(I.jsxs)(w.default,{style:ne.articleContainer,children:[Object(I.jsx)(X,{colors:O,section:e}),a[e].map((function(e,n){return Object(I.jsxs)(K.default,{onPress:function(){t.navigate("WebView",{link:e.link,title:e.title}),G.openBrowserAsync(e.link).catch(console.error)},style:ne.entryContainer,children:[Object(I.jsx)(Y.default,{source:{uri:e.picture},style:[ne.entryImage]}),Object(I.jsxs)(w.default,{style:ne.entryContent,children:[Object(I.jsx)(S.default,{style:[ne.title,{color:O.text}],children:e.title}),Object(I.jsxs)(S.default,{style:[ne.source,{color:O.text}],children:[e.author," - ",e.publishedDate]}),Object(I.jsx)(S.default,{style:[ne.description,{color:O.text}],children:e.shortDescription})]})]},n)}))]},n)}))})}),{isError:b,isLoading:d}),Object(I.jsx)(w.default,{style:[ne.footerContainer,{backgroundColor:O.card}],children:Object(I.jsx)(K.default,{onPress:function(){t.navigate("WebView",{link:"https://high.fi",title:"High.fi"})},children:Object(I.jsxs)(S.default,{style:ne.footerInfoText,children:["Powered by ",Object(I.jsx)(S.default,{style:ne.linkText,children:"high.fi"})]})})})]})},ie=n(136),oe=m.default.create({defaultContainerStyle:{alignItems:"center",backgroundColor:"white",flexDirection:"row",minHeight:50,padding:0},defaultDescriptionStyle:{flex:0,fontSize:12,paddingLeft:16,paddingRight:8},defaultDisabledOverlayStyle:{backgroundColor:"rgba(255,255,255,0.6)",bottom:0,left:0,position:"absolute",right:0,top:0},defaultSwitchWrapperStyle:{flex:0,flexDirection:"row",marginRight:64,paddingLeft:8},defaultTitleStyle:{flex:0,fontSize:16,paddingLeft:16,paddingRight:8},titleWrapper:{flex:1,position:"relative"}}),ce=function(e){var t=e.containerStyle,n=e.description,r=e.descriptionStyle,i=e.disabled,o=e.onValueChange,c=e.title,a=e.titleStyle,l=e.trackColor,s=e.value;return Object(I.jsxs)(w.default,{style:[oe.defaultContainerStyle,t],children:[Object(I.jsxs)(w.default,{style:oe.titleWrapper,children:[Object(I.jsx)(S.default,{style:[oe.defaultTitleStyle,a],children:c}),n?Object(I.jsx)(S.default,{style:[oe.defaultDescriptionStyle,r],children:n}):null,i?Object(I.jsx)(w.default,{style:[oe.defaultDisabledOverlayStyle]}):null]}),Object(I.jsx)(w.default,{style:[oe.defaultSwitchWrapperStyle],children:Object(I.jsx)(ie.default,{disabled:i,onValueChange:o,trackColor:l,value:s})})]})};function ae(){var e=Object(y.useState)(!1),t=c()(e,2),n=t[0],r=t[1],i=Object(D.default)().colors;return Object(I.jsxs)(_.ScrollView,{contentContainerStyle:[se.contentContainer],style:[se.container,{backgroundColor:i.card}],children:[Object(I.jsxs)(w.default,{children:[Object(I.jsx)(S.default,{style:[se.titleStyle,{color:i.text}],children:"Information"}),Object(I.jsx)(w.default,{children:Object(I.jsx)(le,{icon:"md-compass",isLastOption:!0,label:"Highlakka on GitHub",onPress:function(){}})})]},"application"),Object(I.jsxs)(w.default,{children:[Object(I.jsx)(S.default,{style:[se.titleStyle,{color:i.text}],children:"General"}),Object(I.jsx)(ce,{containerStyle:{backgroundColor:i.card},onValueChange:function(e){console.log("use mobile mode:",e),r(e)},title:"Use mobile mode",titleStyle:{color:i.text},value:n})]})]})}var le=function(e){var t=e.icon,n=e.isLastOption,r=e.label,i=e.onPress,o=Object(D.default)().colors;return Object(I.jsx)(_.RectButton,{onPress:i,style:[se.option,n&&se.lastOption,{backgroundColor:o.card}],children:Object(I.jsxs)(w.default,{style:{flexDirection:"row"},children:[Object(I.jsx)(w.default,{style:se.optionIconContainer,children:Object(I.jsx)(F.default,{color:"rgba(0,0,0,0.35)",name:t,size:22})}),Object(I.jsx)(w.default,{children:Object(I.jsx)(S.default,{style:[se.optionText,{color:o.text}],children:r})})]})})},se=m.default.create({container:{backgroundColor:"#fafafa",flex:1,flexDirection:"row",minHeight:50},contentContainer:{flex:1,minHeight:50,paddingTop:15},lastOption:{},option:{backgroundColor:"#fdfdfd",borderBottomWidth:0,borderColor:"#ededed",paddingHorizontal:5,paddingVertical:5},optionIconContainer:{marginLeft:12,marginRight:12},optionText:{alignSelf:"flex-start",fontSize:15,marginTop:1},titleStyle:{flex:0,fontSize:16,paddingLeft:16,paddingRight:8}}),ue=n(328),de={height:"100%",top:0,width:"100%"},fe=m.default.create({container:{height:"100%",overflow:"hidden",width:"100%"}}),je=function(e){var t=e.target;return"web"===q.default.OS?Object(I.jsx)("iframe",{src:t,style:de}):Object(I.jsx)(w.default,{style:fe.container,children:Object(I.jsx)(ue.WebView,{scalesPageToFit:!0,source:{uri:t},startInLoadingState:!0})})};function he(e){var t=e.route.params.link;return Object(I.jsx)(w.default,{style:be.container,children:Object(I.jsx)(je,{target:t})})}var be=m.default.create({container:{alignItems:"center",backgroundColor:"#fff",flex:1,justifyContent:"center"}});function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){return Object(I.jsxs)(s.default,Oe(Oe({},e),{},{children:[Object(I.jsx)(W,Oe({},e)),Object(I.jsx)(u.default,Oe({},e))]}))},ge=Object(d.default)(),xe=Object(b.default)(),me=function(e){var t=e.item,n=t.htmlFilename,r=t.title;return Object(I.jsx)(L.Provider,{value:{htmlFilename:n,title:r},children:Object(I.jsxs)(xe.Navigator,{children:[Object(I.jsx)(xe.Screen,{component:re,name:"Highlakka",options:{title:"Highlakka: "+r}}),Object(I.jsx)(xe.Screen,{component:ae,name:"Settings",options:{title:"Settings"}}),Object(I.jsx)(xe.Screen,{component:he,name:"WebView",options:function(e){return{title:e.route.params.title}}})]})})},Se=function(){return Object(I.jsx)(w.default,{style:{alignItems:"center",flex:1,justifyContent:"center"}})},ve=function(){var e=function(){var e=y.useState(!1),t=c()(e,2),r=t[0],o=t[1];return y.useEffect((function(){function e(){return(e=i()((function*(){try{J.preventAutoHideAsync(),yield N.loadAsync(M(M({},F.default.font),{},{"space-mono":n(369)}))}catch(e){console.warn(e)}finally{o(!0),J.hideAsync()}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r}(),t=(Object(v.default)(),"dark"===Object(y.useContext)(E).state.colorScheme),r=Object(y.useState)([]),o=c()(r,2),a=o[0],l=o[1],s=Object(y.useState)(!0),u=c()(s,2),d=u[0],b=u[1],p=Object(y.useState)(!1),g=c()(p,2),m=g[0],D=g[1],P=t?"dark":"light";return Object(y.useEffect)((function(){(function(){var e=i()((function*(){var e=yield V("fi.high.fi","Suosituimmat","uutiset","Uusimmat","finnish");l(e),b(!1),D(!1)}));return function(){return e.apply(this,arguments)}})()().catch((function(e){console.error(e),b(!1),D(!0)}))}),[]),e?d?Object(I.jsx)(C.SafeAreaProvider,{children:Object(I.jsx)(k.SafeAreaView,{style:[Ce.container],children:Object(I.jsx)(x.default,{animating:!0})})}):m?Object(I.jsx)(C.SafeAreaProvider,{children:Object(I.jsx)(k.SafeAreaView,{style:[Ce.container],children:Object(I.jsx)(S.default,{children:"Failed to load news!"})})}):Object(I.jsx)(C.SafeAreaProvider,{children:Object(I.jsx)(f.default,{theme:t?j.default:h.default,children:Object(I.jsxs)(w.default,{style:[Ce.container],children:[Object(I.jsx)(O.StatusBar,{style:P}),Object(I.jsx)(ge.Navigator,{drawerContent:ye,initialRouteName:"Root",children:a&&a.length>0?a.map((function(e){return Object(I.jsx)(ge.Screen,{children:function(){return Object(I.jsx)(me,{item:e})},name:e.title+"_"+e.sectionID,options:{drawerLabel:e.title}},e.sectionID)})):Object(I.jsx)(ge.Screen,{component:Se,name:"empty"})})]})})}):null};function we(){return Object(I.jsx)(H,{children:Object(I.jsx)(ve,{})})}var Ce=m.default.create({container:{backgroundColor:"#fff",flex:1},header:{height:50}});Object(p.default)(ve)},338:function(e,t,n){e.exports=n(339)},369:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"}},[[338,1,2]]]);
//# sourceMappingURL=app.efaa9573.chunk.js.map